!function(t){function e(e){for(var n,i,l=e[0],c=e[1],p=e[2],s=0,d=[];s<l.length;s++)i=l[s],a[i]&&d.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);for(u&&u(e);d.length;)d.shift()();return o.push.apply(o,p||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,l=1;l<r.length;l++){var c=r[l];0!==a[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},a={0:0},o=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var p=0;p<l.length;p++)e(l[p]);var u=c;o.push([2,1]),r()}([,function(t,e,r){t.exports=r.p+"src/data/data.csv"},function(t,e,r){"use strict";r.r(e);var n=r(0),a=(r(3),r(1)),o=r.n(a);const i={top:40,right:20,bottom:30,left:100},l=500-i.top-i.bottom,c=1e3-i.left-i.right;let p=[],u=[];n.d(o.a,function(t){if(t.Year)return{year:t.Year,attendence:t.Attendance}}).then(function(t){(p=n.f().key(function(t){return t.year}).sortKeys(n.a).entries(t)).map(t=>{u.push({key:t.key,value:t.values.filter(t=>t.attendence).reduce((t,e)=>t+parseInt(e.attendence,10)||0,0)})}),function(){const t=[];p.map(e=>t.push(e.values.filter(t=>t.attendence).reduce((t,e)=>t+parseInt(e.attendence,10)||0,0)));const e=n.g().domain(p.map(t=>t.key)).range([i.left,c+i.left]).padding(.2),r=n.h().domain([0,n.e(t)]).range([i.top+l,i.top]);s.append("g").attr("transform",`translate(0,${i.top+l})`).call(n.b(e)),s.append("g").attr("class","grid").attr("transform",`translate(${i.left},0)`).call(n.c(r).scale(r).tickSize(-c,0,0)),s.append("text").attr("x",-l/2-i.top).attr("y",40).attr("transform","rotate(-90)").attr("text-anchor","middle").text("Amount of audience"),s.append("text").attr("x",c/2+i.left).attr("y",20).attr("text-anchor","middle").text("FIFA audience of years"),s.append("text").attr("x",c/2+i.left).attr("y",l+i.top+i.bottom).attr("text-anchor","middle").text("Year"),s.selectAll("rect").data(u).enter().append("rect").attr("fill","steelblue").attr("x",t=>e(t.key)).attr("y",t=>r(t.value)).attr("width",e.bandwidth()).attr("height",t=>l-r(t.value)+i.top),s.selectAll("rect").on("mouseenter",function(t,a){n.i(this).transition().attr("opacity",.6).attr("x",t=>e(t.key)-2).attr("width",e.bandwidth()+4);const o=r(t.value);s.append("line").attr("id","limit").attr("x1",i.left).attr("y1",o).attr("x2",e(t.key)+e.bandwidth()).attr("y2",o).attr("stroke","green")}).on("mouseleave",function(){n.i(this).transition().attr("opacity",1).attr("x",t=>e(t.key)).attr("width",e.bandwidth()),n.i("#limit").remove()})}()});const s=n.i("#chart").append("svg").attr("width",1e3).attr("height",500)},function(t,e,r){var n=r(4);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(6)(n,a);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(5)(!1)).push([t.i,".grid path{stroke-width:0}.grid line{stroke:#9faaae;stroke-opacity:.6}",""])}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEvZGF0YS5jc3YiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY3NzL3N0eWxlLnNhc3M/YzM1YyIsIndlYnBhY2s6Ly8vLi9zcmMvY3NzL3N0eWxlLnNhc3MiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIwIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJtYXJnaW4iLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJoZWlnaHQiLCJ3aWR0aCIsImVudHJpZXMiLCJwYWlycyIsImQzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJfZGF0YV9kYXRhX2Nzdl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQiLCJhIiwiWWVhciIsInllYXIiLCJhdHRlbmRlbmNlIiwiQXR0ZW5kYW5jZSIsInRoZW4iLCJzb3J0S2V5cyIsIm1hcCIsIml0ZW0iLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJyZWR1Y2UiLCJiIiwicGFyc2VJbnQiLCJzdW0iLCJ4IiwiZG9tYWluIiwicmFuZ2UiLCJwYWRkaW5nIiwieSIsInN2ZyIsImFwcGVuZCIsImF0dHIiLCJzY2FsZSIsInRpY2tTaXplIiwidGV4dCIsInNlbGVjdEFsbCIsImVudGVyIiwiYmFuZHdpZHRoIiwib24iLCJ0aGlzIiwidHJhbnNpdGlvbiIsInkxMiIsInJlbW92ZSIsIkRyYXciLCJjb250ZW50Iiwib3B0aW9ucyIsImhtciIsInRyYW5zZm9ybSIsImluc2VydEludG8iLCJ1bmRlZmluZWQiLCJsb2NhbHMiXSwibWFwcGluZ3MiOiJhQUNBLFNBQUFBLEVBQUFDLEdBUUEsSUFQQSxJQU1BQyxFQUFBQyxFQU5BQyxFQUFBSCxFQUFBLEdBQ0FJLEVBQUFKLEVBQUEsR0FDQUssRUFBQUwsRUFBQSxHQUlBTSxFQUFBLEVBQUFDLEtBQ1FELEVBQUFILEVBQUFLLE9BQW9CRixJQUM1QkosRUFBQUMsRUFBQUcsR0FDQUcsRUFBQVAsSUFDQUssRUFBQUcsS0FBQUQsRUFBQVAsR0FBQSxJQUVBTyxFQUFBUCxHQUFBLEVBRUEsSUFBQUQsS0FBQUcsRUFDQU8sT0FBQUMsVUFBQUMsZUFBQUMsS0FBQVYsRUFBQUgsS0FDQWMsRUFBQWQsR0FBQUcsRUFBQUgsSUFLQSxJQUZBZSxLQUFBaEIsR0FFQU8sRUFBQUMsUUFDQUQsRUFBQVUsT0FBQVYsR0FPQSxPQUhBVyxFQUFBUixLQUFBUyxNQUFBRCxFQUFBYixPQUdBZSxJQUVBLFNBQUFBLElBRUEsSUFEQSxJQUFBQyxFQUNBZixFQUFBLEVBQWlCQSxFQUFBWSxFQUFBVixP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R0FBS29ELEVBQUVwRCxFQUFFZ0IsTUFDbkIyQyxLQUFLLFFBQVNQLEVBQUVhLGFBRW5COUIsRUFBQSxFQUFVLFVBQVVtQyxXQTVHeEJDLEtBR0YsTUFBTWQsRUFBTXRCLEVBQUEsRUFDRixVQUNQdUIsT0FBTyxPQUNQQyxLQUFLLFFBQVMsS0FDZEEsS0FBSyxTQUFVLHNCQzFDbEIsSUFBQWEsRUFBQWpGLEVBQUEsR0FFQSxpQkFBQWlGLFFBQUE1RSxFQUFBMUIsRUFBQXNHLEVBQUEsTUFPQSxJQUFBQyxHQUFlQyxLQUFBLEVBRWZDLGVBUEFBLEVBUUFDLGdCQUFBQyxHQUVBdEYsRUFBQSxFQUFBQSxDQUFBaUYsRUFBQUMsR0FFQUQsRUFBQU0sU0FBQWxGLEVBQUFELFFBQUE2RSxFQUFBTSwwQkNqQkFsRixFQUFBRCxRQUFBSixFQUFBLEVBQUFBLEVBQUEsSUFLQWpCLE1BQUFzQixFQUFBMUIsRUFBQSx5RUFBZ0ciLCJmaWxlIjoiaW5kZXguYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG4gXHRcdHZhciBleGVjdXRlTW9kdWxlcyA9IGRhdGFbMl07XG5cbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcbiBcdFx0XHR9XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oZGF0YSk7XG5cbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdFx0Ly8gYWRkIGVudHJ5IG1vZHVsZXMgZnJvbSBsb2FkZWQgY2h1bmsgdG8gZGVmZXJyZWQgbGlzdFxuIFx0XHRkZWZlcnJlZE1vZHVsZXMucHVzaC5hcHBseShkZWZlcnJlZE1vZHVsZXMsIGV4ZWN1dGVNb2R1bGVzIHx8IFtdKTtcblxuIFx0XHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIGFsbCBjaHVua3MgcmVhZHlcbiBcdFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4gXHR9O1xuIFx0ZnVuY3Rpb24gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKSB7XG4gXHRcdHZhciByZXN1bHQ7XG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgZGVmZXJyZWRNb2R1bGUgPSBkZWZlcnJlZE1vZHVsZXNbaV07XG4gXHRcdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG4gXHRcdFx0Zm9yKHZhciBqID0gMTsgaiA8IGRlZmVycmVkTW9kdWxlLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHR2YXIgZGVwSWQgPSBkZWZlcnJlZE1vZHVsZVtqXTtcbiBcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tkZXBJZF0gIT09IDApIGZ1bGZpbGxlZCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZihmdWxmaWxsZWQpIHtcbiBcdFx0XHRcdGRlZmVycmVkTW9kdWxlcy5zcGxpY2UoaS0tLCAxKTtcbiBcdFx0XHRcdHJlc3VsdCA9IF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gZGVmZXJyZWRNb2R1bGVbMF0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MDogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbMiwxXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcInNyYy9kYXRhL2RhdGEuY3N2XCI7IiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuXG5pbXBvcnQgJy4vY3NzL3N0eWxlLnNhc3MnO1xuXG5pbXBvcnQgY3N2IGZyb20gJy4vZGF0YS9kYXRhLmNzdic7XG5cbmNvbnN0IG1hcmdpbiA9IHsgdG9wOiA0MCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAxMDAgfSxcbiAgaGVpZ2h0ID0gNTAwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b20sXG4gIHdpZHRoID0gMTAwMCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0O1xuXG5sZXQgZW50cmllcyA9IFtdO1xubGV0IHBhaXJzID0gW107XG5cbmQzLmNzdihjc3YsIGZ1bmN0aW9uKGQpIHtcbiAgaWYgKGQuWWVhcikge1xuICAgIHJldHVybiB7XG4gICAgICB5ZWFyOiBkLlllYXIsXG4gICAgICBhdHRlbmRlbmNlOiBkLkF0dGVuZGFuY2VcbiAgICB9O1xuICB9XG59KS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgZW50cmllcyA9IGQzXG4gICAgLm5lc3QoKVxuICAgIC5rZXkoZnVuY3Rpb24oZCkge1xuICAgICAgcmV0dXJuIGQueWVhcjtcbiAgICB9KVxuICAgIC5zb3J0S2V5cyhkMy5hc2NlbmRpbmcpXG4gICAgLmVudHJpZXMoZGF0YSk7XG4gIGVudHJpZXMubWFwKGl0ZW0gPT4ge1xuICAgIHBhaXJzLnB1c2goe1xuICAgICAga2V5OiBpdGVtLmtleSxcbiAgICAgIHZhbHVlOiBpdGVtLnZhbHVlcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmF0dGVuZGVuY2UpLnJlZHVjZSgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYSArIHBhcnNlSW50KGIuYXR0ZW5kZW5jZSwgMTApIHx8IDA7XG4gICAgICB9LCAwKVxuICAgIH0pO1xuICB9KTtcbiAgRHJhdygpO1xufSk7XG5cbmNvbnN0IHN2ZyA9IGQzXG4gIC5zZWxlY3QoJyNjaGFydCcpXG4gIC5hcHBlbmQoJ3N2ZycpXG4gIC5hdHRyKCd3aWR0aCcsIDEwMDApXG4gIC5hdHRyKCdoZWlnaHQnLCA1MDApO1xuXG5mdW5jdGlvbiBEcmF3KCkge1xuICBjb25zdCBzdW0gPSBbXTtcbiAgZW50cmllcy5tYXAoaXRlbSA9PlxuICAgIHN1bS5wdXNoKFxuICAgICAgaXRlbS52YWx1ZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5hdHRlbmRlbmNlKS5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGEgKyBwYXJzZUludChiLmF0dGVuZGVuY2UsIDEwKSB8fCAwO1xuICAgICAgfSwgMClcbiAgICApXG4gICk7XG4gIGNvbnN0IHggPSBkM1xuICAgIC5zY2FsZUJhbmQoKVxuICAgIC5kb21haW4oZW50cmllcy5tYXAoaXRlbSA9PiBpdGVtLmtleSkpXG4gICAgLnJhbmdlKFttYXJnaW4ubGVmdCwgd2lkdGggKyBtYXJnaW4ubGVmdF0pXG4gICAgLnBhZGRpbmcoMC4yKTtcblxuICBjb25zdCB5ID0gZDNcbiAgICAuc2NhbGVMaW5lYXIoKVxuICAgIC5kb21haW4oWzAsIGQzLm1heChzdW0pXSlcbiAgICAucmFuZ2UoW21hcmdpbi50b3AgKyBoZWlnaHQsIG1hcmdpbi50b3BdKTtcblxuICBzdmdcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgwLCR7bWFyZ2luLnRvcCArIGhlaWdodH0pYClcbiAgICAuY2FsbChkMy5heGlzQm90dG9tKHgpKTtcblxuICBzdmdcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCAnZ3JpZCcpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHttYXJnaW4ubGVmdH0sMClgKVxuICAgIC5jYWxsKFxuICAgICAgZDNcbiAgICAgICAgLmF4aXNMZWZ0KHkpXG4gICAgICAgIC5zY2FsZSh5KVxuICAgICAgICAudGlja1NpemUoLXdpZHRoLCAwLCAwKVxuICAgICk7XG5cbiAgLy8geSBheGlzIGxhYmVsXG4gIHN2Z1xuICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgIC5hdHRyKCd4JywgLWhlaWdodCAvIDIgLSBtYXJnaW4udG9wKVxuICAgIC5hdHRyKCd5JywgNDApXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsICdyb3RhdGUoLTkwKScpXG4gICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgLnRleHQoJ0Ftb3VudCBvZiBhdWRpZW5jZScpO1xuXG4gIC8vICBsZWdlbmRcbiAgc3ZnXG4gICAgLmFwcGVuZCgndGV4dCcpXG4gICAgLmF0dHIoJ3gnLCB3aWR0aCAvIDIgKyBtYXJnaW4ubGVmdClcbiAgICAuYXR0cigneScsIDIwKVxuICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKVxuICAgIC50ZXh0KCdGSUZBIGF1ZGllbmNlIG9mIHllYXJzJyk7XG5cbiAgLy8geCBheGlzIGxhYmVsXG4gIHN2Z1xuICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgIC5hdHRyKCd4Jywgd2lkdGggLyAyICsgbWFyZ2luLmxlZnQpXG4gICAgLmF0dHIoJ3knLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAuYXR0cigndGV4dC1hbmNob3InLCAnbWlkZGxlJylcbiAgICAudGV4dCgnWWVhcicpO1xuXG4gIGNvbnN0IHJlY3QgPSBzdmcuc2VsZWN0QWxsKCdyZWN0JykuZGF0YShwYWlycyk7XG5cbiAgcmVjdFxuICAgIC5lbnRlcigpXG4gICAgLmFwcGVuZCgncmVjdCcpXG4gICAgLmF0dHIoJ2ZpbGwnLCAnc3RlZWxibHVlJylcbiAgICAuYXR0cigneCcsIGQgPT4geChkLmtleSkpXG4gICAgLmF0dHIoJ3knLCBkID0+IHkoZC52YWx1ZSkpXG4gICAgLmF0dHIoJ3dpZHRoJywgeC5iYW5kd2lkdGgoKSlcbiAgICAuYXR0cignaGVpZ2h0JywgZCA9PiBoZWlnaHQgLSB5KGQudmFsdWUpICsgbWFyZ2luLnRvcCk7XG5cbiAgc3ZnXG4gICAgLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjYpXG4gICAgICAgIC5hdHRyKCd4JywgZCA9PiB4KGQua2V5KSAtIDIpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIHguYmFuZHdpZHRoKCkgKyA0KTtcblxuICAgICAgY29uc3QgeTEyID0geShkLnZhbHVlKTtcblxuICAgICAgc3ZnXG4gICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAuYXR0cignaWQnLCAnbGltaXQnKVxuICAgICAgICAuYXR0cigneDEnLCBtYXJnaW4ubGVmdClcbiAgICAgICAgLmF0dHIoJ3kxJywgeTEyKVxuICAgICAgICAuYXR0cigneDInLCB4KGQua2V5KSArIHguYmFuZHdpZHRoKCkpXG4gICAgICAgIC5hdHRyKCd5MicsIHkxMilcbiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICdncmVlbicpO1xuICAgIH0pXG4gICAgLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKSB7XG4gICAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuYXR0cignb3BhY2l0eScsIDEpXG4gICAgICAgIC5hdHRyKCd4JywgZCA9PiB4KGQua2V5KSlcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgeC5iYW5kd2lkdGgoKSk7XG5cbiAgICAgIGQzLnNlbGVjdCgnI2xpbWl0JykucmVtb3ZlKCk7XG4gICAgfSk7XG59XG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9zdHlsZS5zYXNzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL3N0eWxlLnNhc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL3N0eWxlLnNhc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5ncmlkIHBhdGh7c3Ryb2tlLXdpZHRoOjB9LmdyaWQgbGluZXtzdHJva2U6IzlmYWFhZTtzdHJva2Utb3BhY2l0eTouNn1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iXSwic291cmNlUm9vdCI6IiJ9